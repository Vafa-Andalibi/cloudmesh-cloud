

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3. VM Providers (outdated) &mdash; Cloudmesh v4 alpha documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="4. Vagrant (outdated)" href="vagrant.html" />
    <link rel="prev" title="1. Goal (outdated)" href="goal.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Cloudmesh v4
          

          
          </a>

          
            
            
              <div class="version">
                4.0.28
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="about.html">1. About</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributors.html">2. Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">3. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">4. Quickstart (proposed)</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">5. Configuration (ok)</a></li>
<li class="toctree-l1"><a class="reference internal" href="yaml.html">6. Cloudmesh yaml file</a></li>
<li class="toctree-l1"><a class="reference internal" href="mongo.html">7. Cloudmesh Database (ok)</a></li>
<li class="toctree-l1"><a class="reference internal" href="manual.html">8. Manual (ok)</a></li>
<li class="toctree-l1"><a class="reference internal" href="manual-dev.html">9. Manual (proposed)</a></li>
<li class="toctree-l1"><a class="reference internal" href="jupyter.html">10. Jupyter Integration (proposed)</a></li>
<li class="toctree-l1"><a class="reference internal" href="vm.html">11. Virtual Machine Management (proposed)</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflow.html">12. Infrastructure Workflow (proposed)</a></li>
<li class="toctree-l1"><a class="reference internal" href="code.html">13. Code Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Conventions:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="conventions.html">1. Code Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="pytest.html">2. Pytest</a></li>
</ul>
<p class="caption"><span class="caption-text">Outdated:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="goal.html">1. Goal (outdated)</a></li>
<li class="toctree-l1"><a class="reference internal" href="goal.html#manual-cloudmesh-multi-service-data-access">2. Manual: Cloudmesh Multi Service Data Access</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">3. VM Providers (outdated)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#general-cloud-providers-access">3.1. General Cloud Providers Access</a></li>
<li class="toctree-l2"><a class="reference internal" href="#general-interface">3.2. General Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="#explicit-use-with-options">3.3. Explicit Use with Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vagrant">3.4. Vagrant</a></li>
<li class="toctree-l2"><a class="reference internal" href="#aws">3.5. AWS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#setup-and-configuration">3.5.1. Setup and Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#azure">3.6. Azure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">3.6.1. Setup and Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#openstack">3.7. OpenStack</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#jetstream">3.7.1. Jetstream</a></li>
<li class="toctree-l3"><a class="reference internal" href="#chameleon-cloud">3.7.2. Chameleon Cloud</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cybera">3.7.3. Cybera</a></li>
<li class="toctree-l3"><a class="reference internal" href="#devstack">3.7.4. DevStack</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="vagrant.html">4. Vagrant (outdated)</a></li>
<li class="toctree-l1"><a class="reference internal" href="CM4README.html">5. CM4 Details (outdated)</a></li>
<li class="toctree-l1"><a class="reference internal" href="aws.html">6. AWS cm (outdated)</a></li>
<li class="toctree-l1"><a class="reference internal" href="ufo.html">7. REST Service (outdated)</a></li>
<li class="toctree-l1"><a class="reference internal" href="vcluster.html">8. Virtual Cluster (in progress)</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Cloudmesh v4</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>3. VM Providers (outdated)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/vmproviders.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="vm-providers-outdated">
<h1>3. VM Providers (outdated)<a class="headerlink" href="#vm-providers-outdated" title="Permalink to this headline">¶</a></h1>
<p>Cm4 works straight forward with a number of providers under the
assumption you have accounts on these frameworks. We demonstrate hete
how to start a singel vm on each of these providers and list the
started vms. Defaults form the configuration file are used to select
images and flavors. These defaults can naturally be changed.</p>
<div class="section" id="general-cloud-providers-access">
<h2>3.1. General Cloud Providers Access<a class="headerlink" href="#general-cloud-providers-access" title="Permalink to this headline">¶</a></h2>
<p>We are using the python library
<a class="reference external" href="https://libcloud.apache.org">Apache Libcloud</a> to interact with
cloud service providers. Currently, in <code class="docutils literal notranslate"><span class="pre">cms</span></code>, we could access:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://aws.amazon.com">AWS</a></p></li>
<li><p><a class="reference external" href="https://azure.microsoft.com/en-us/">AZURE</a></p></li>
<li><p>any cloud service providers using <em>OpenStack</em>.
For example, <a class="reference external" href="https://www.chameleoncloud.org">Chameleon</a> and
<a class="reference external" href="https://jetstream-cloud.org">Jetstream</a></p></li>
</ul>
<p>By using the <em>Apache Libcloud</em> API, we could do these operations for
nodes in above cloud service providers:</p>
<ul class="simple">
<li><p>Start the node</p></li>
<li><p>Stop the node</p></li>
<li><p>Resume the node</p></li>
<li><p>Suspend the node</p></li>
<li><p>Destory the node</p></li>
<li><p>Create the node</p></li>
</ul>
<p><strong>Improvement</strong>: Sometimes adjustments to nodes are necessary (switch
between different images/OS and service sizes).  Cm4 also allow users
to customize their instances across multiple providers by using
refactor functions to support their management tasks.</p>
<ul class="simple">
<li><p>Resize the node</p></li>
<li><p>Rebuild(with different image) the node</p></li>
<li><p>Rename the node</p></li>
<li><p>Revert previous operations to the node</p></li>
</ul>
</div>
<div class="section" id="general-interface">
<h2>3.2. General Interface<a class="headerlink" href="#general-interface" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cms <span class="nb">set</span> <span class="nv">cloud</span><span class="o">=</span>&lt;cloudname as defined in the ~/.cloudmesh/cloudmesh4.yaml&gt;
$ cms vm start
$ cms vm list

$ cms <span class="nv">flavor</span><span class="o">=</span><span class="s2">&quot;medium&quot;</span>
$ cms <span class="nv">image</span><span class="o">=</span><span class="s2">&quot;ubuntu18.04&quot;</span>

$ cms vm start
</pre></div>
</div>
</div>
<div class="section" id="explicit-use-with-options">
<h2>3.3. Explicit Use with Options<a class="headerlink" href="#explicit-use-with-options" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cms vm start --cloud<span class="o">=</span>chameleon --image<span class="o">=</span>ubuntu18.04 --flavor<span class="o">=</span>medium --key<span class="o">=</span>~/.ssh/id_rsa.bub
</pre></div>
</div>
</div>
<div class="section" id="vagrant">
<h2>3.4. Vagrant<a class="headerlink" href="#vagrant" title="Permalink to this headline">¶</a></h2>
<p>TODO</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cms <span class="nb">set</span> <span class="nv">cloud</span><span class="o">=</span>vagrant
$ cms vm start
$ cms vm list
</pre></div>
</div>
</div>
<div class="section" id="aws">
<h2>3.5. AWS<a class="headerlink" href="#aws" title="Permalink to this headline">¶</a></h2>
<div class="section" id="setup-and-configuration">
<h3>3.5.1. Setup and Configuration<a class="headerlink" href="#setup-and-configuration" title="Permalink to this headline">¶</a></h3>
<p>Amazon Web Service (<strong>AWS</strong>) provided by Amazon is a secure cloud
service platform, users could start any instances with selected
images.</p>
<p>Before users use the <strong>cms</strong> platform to access <strong>EC2</strong>, they have to finish these preparations:</p>
<ol>
<li><p>EC2 account, more information is
<a class="reference external" href="https://aws.amazon.com/premiumsupport/knowledge-center/create-and-activate-aws-account/">here</a></p></li>
<li><p>Log in the EC2 account, update your <strong>Access Key</strong>.</p>
<p><strong>Access Keys</strong> has two parts: <strong>Access Key ID</strong> and <strong>Secret
Access Key</strong>. These <strong>Access Keys</strong> are the only way you could
authentically access the AWS though AWS API requests.  (create new
Access Key: Account (right upper corner) &gt; My Security Credentials</p>
<blockquote>
<div><p>Access Keys &gt; Create New Access Key)</p>
</div></blockquote>
</li>
<li><p><strong>Private Key file</strong> is a key pairs to encrypt and decrypt login
information. While using <strong>Private Key file</strong>, there is no need to
use username or password to login the instance of AWS. For sshing
the instance, the ssh client would use the <strong>private key file</strong>
instead of credential information. (create new key pairs: Network &amp;
Security (left column bar) &gt; Key Pairs &gt; Create Key Pair)</p></li>
<li><p><strong>Security Group</strong> acts as a virtual firewall for the instance.
When you launch a instance, we have to attach the <strong>Security
Group</strong> to it for controlling the traffic in and out. So before you
are using any nodes in AWS, you have to pre-define the <strong>Security
Group</strong> that you will use.  (create new Security Group: Network $
Security (left column bar) &gt; Security Group &gt; Create Security
Group)</p></li>
<li><p><strong>Region</strong> is the service location where you start the instance.
AWS hosts services in different regions, you should select the
region where you want to start you instance.</p></li>
</ol>
<p>When you finish all above things, you should update information into
the block ‘aws’ of <strong>cloudmesh4.yaml</strong> file in <strong>ETC</strong> folder</p>
<p><strong>EC2</strong> provides On-Demand Pricing cloud services based on different
CPU, Memory and Storage selections. Please visit this
<a class="reference external" href="https://aws.amazon.com/ec2/pricing/on-demand/">page</a> for more
information. In default setting, we use the latest <strong>Ubuntu</strong> image
filled in default.image field. If you want to use other images, please
update the Image ID into it.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cms <span class="nb">set</span> <span class="nv">cloud</span><span class="o">=</span>aws
$ cms vm start
$ cms vm list
</pre></div>
</div>
</div>
</div>
<div class="section" id="azure">
<h2>3.6. Azure<a class="headerlink" href="#azure" title="Permalink to this headline">¶</a></h2>
<p>Uses <a class="reference external" href="https://libcloud.readthedocs.io/en/latest/compute/drivers/azure_arm.html">LibCloud’s Azure ARM Compute Driver</a></p>
<div class="section" id="id1">
<h3>3.6.1. Setup and Configuration<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p><strong>Install Azure CLI</strong></p>
<p><a class="reference external" href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli?view=azure-cli-latest">Download and install according to your platform.</a></p>
<p><strong>Make sure subscription is registered for compute services</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">az</span> <span class="n">provider</span> <span class="n">register</span> <span class="o">--</span><span class="n">namespace</span> <span class="n">Microsoft</span><span class="o">.</span><span class="n">Compute</span>
</pre></div>
</div>
<p><strong>Service principal</strong></p>
<p><a class="reference external" href="https://docs.microsoft.com/en-us/cli/azure/create-an-azure-service-principal-azure-cli?view=azure-cli-latest">Full documentation on creating service principals.</a>
The Azure ARM Driver does not appear to support certificate based
principals at this time.</p>
<p>Create Principal</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">az</span> <span class="n">ad</span> <span class="n">sp</span> <span class="n">create</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="n">rbac</span> <span class="o">--</span><span class="n">name</span> <span class="n">cm</span><span class="o">-</span><span class="n">admin</span><span class="o">-</span><span class="n">pw</span> <span class="o">--</span><span class="n">password</span> <span class="o">&lt;</span><span class="n">SECRET</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Add <code class="docutils literal notranslate"><span class="pre">Owner</span></code> role.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">az</span> <span class="n">role</span> <span class="n">assignment</span> <span class="n">create</span> <span class="o">--</span><span class="n">assignee</span> <span class="o">&lt;</span><span class="n">APP_ID</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">role</span> <span class="n">Owner</span>
</pre></div>
</div>
<p><em>Note:</em> <code class="docutils literal notranslate"><span class="pre">&lt;APP_ID&gt;</span></code> is provided in the output when the principal is created</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cms <span class="nb">set</span> <span class="nv">cloud</span><span class="o">=</span>azure
$ cms vm start
$ cms vm list
</pre></div>
</div>
</div>
</div>
<div class="section" id="openstack">
<h2>3.7. OpenStack<a class="headerlink" href="#openstack" title="Permalink to this headline">¶</a></h2>
<p>OpenStack is an Infrastructure service that allows users to utilize
computing resource in cloud service platform through virtual
environments.</p>
<p><a class="reference external" href="https://www.chameleoncloud.org/">Chameleon Cloud</a> provides an
OpenStack installation of version 2015.1 (Kilo) using the KVM
virtualization technology at the KVM&#64;TACC site. It is important to
make sure you are visiting the
<a class="reference external" href="https://openstack.tacc.chameleoncloud.org/">KVM&#64;TACC</a> site so as to
get proper installation. Learn more
<a class="reference external" href="https://chameleoncloud.readthedocs.io/en/latest/technical/kvm.html">here</a>
to properly set up yout account before proceed to your journey with
<strong>cms</strong>.</p>
<div class="section" id="jetstream">
<h3>3.7.1. Jetstream<a class="headerlink" href="#jetstream" title="Permalink to this headline">¶</a></h3>
<p>TODO</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cms <span class="nb">set</span> <span class="nv">cloud</span><span class="o">=</span>jetstream
$ cms vm start
$ cms vm list
</pre></div>
</div>
</div>
<div class="section" id="chameleon-cloud">
<h3>3.7.2. Chameleon Cloud<a class="headerlink" href="#chameleon-cloud" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cms <span class="nb">set</span> <span class="nv">cloud</span><span class="o">=</span>chameleon
$ cms vm start
$ cms vm list
</pre></div>
</div>
</div>
<div class="section" id="cybera">
<h3>3.7.3. Cybera<a class="headerlink" href="#cybera" title="Permalink to this headline">¶</a></h3>
<p>TODO</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cms <span class="nb">set</span> <span class="nv">cloud</span><span class="o">=</span>cybera
$ cms vm start
$ cms vm list
</pre></div>
</div>
</div>
<div class="section" id="devstack">
<h3>3.7.4. DevStack<a class="headerlink" href="#devstack" title="Permalink to this headline">¶</a></h3>
<p>TODO</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cms <span class="nb">set</span> <span class="nv">cloud</span><span class="o">=</span>devstack
$ cms vm start
$ cms vm list
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="vagrant.html" class="btn btn-neutral float-right" title="4. Vagrant (outdated)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="goal.html" class="btn btn-neutral float-left" title="1. Goal (outdated)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Cloudmesh Community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>